ã„ã„ã§ã™ã­ã€ã˜ã‚ƒã‚æœ€å¾Œã®ãƒ”ãƒ¼ã‚¹ã§ã‚ã‚‹ ææ¡ˆæ©Ÿèƒ½ï¼ˆRecommendationï¼‰ ã‚’ã¾ã¨ã‚ã¦ã„ãã¾ã™ ğŸ’ª
ã“ã‚Œã¾ã§ã¨åŒã˜ãï¼š

æ¦‚è¦
ãƒ‡ãƒ¼ã‚¿ä»•æ§˜ï¼ˆä½•ã‚’æŒã¤ã‹ï¼‰
å¤–éƒ¨ä»•æ§˜ï¼ˆUX / APIï¼‰
å†…éƒ¨ä»•æ§˜ï¼ˆãƒ‰ãƒ¡ã‚¤ãƒ³ / UseCase / ãƒãƒ¼ãƒˆ / JOBï¼‰
ã®é †ã§æ•´ç†ã—ã¾ã™ã€‚

ææ¡ˆæ©Ÿèƒ½ï¼ˆMealRecommendationï¼‰ã®ä»•æ§˜ 0. æ¦‚è¦
ç›®çš„

æ—¥æ¬¡ãƒ¬ãƒãƒ¼ãƒˆï¼ˆDailyNutritionReportï¼‰ã‹ã‚‰ã€Œæœ€è¿‘ã®å‚¾å‘ã€ã‚’èª­ã¿å–ã‚Šã€
ã€Œã˜ã‚ƒã‚æ¬¡ã¯ã©ã†é£Ÿã¹ã‚‹ã¨ã„ã„ã‹ï¼Ÿã€ã¨ã„ã†ææ¡ˆ ã‚’ LLM ã§ç”Ÿæˆã™ã‚‹ã€‚

ãƒ¦ãƒ¼ã‚¶ãƒ¼ã«ã¨ã£ã¦ã¯ï¼š

æ—¥ã€…ã®ãƒ¬ãƒãƒ¼ãƒˆãŒã€Œéå»ã®æŒ¯ã‚Šè¿”ã‚Šã€ã€
ææ¡ˆã¯ã€Œã“ã‚Œã‹ã‚‰ã©ã†è¡Œå‹•ã™ã‚‹ã‹ã€ã®ã‚¬ã‚¤ãƒ‰ã€ã¨ã„ã†ä½ç½®ã¥ã‘ã€‚
ä½ç½®ã¥ã‘

ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ã¨ã—ã¦ã¯ï¼š
é£Ÿäº‹è¨˜éŒ²ï¼ˆFoodEntryï¼‰
â†’ æ „é¤Šè¨ˆç®—ï¼ˆMeal / Dailyï¼‰
â†’ è¨˜éŒ²å®Œäº†åˆ¤å®š
â†’ æ—¥æ¬¡ãƒ¬ãƒãƒ¼ãƒˆï¼ˆDailyNutritionReportï¼‰
â†’ ææ¡ˆï¼ˆMealRecommendationï¼‰ â† ä»Šã“ã“

å‰æ

ææ¡ˆã®ç”Ÿæˆã«ã¯ ç›´è¿‘ N æ—¥åˆ†ï¼ˆç¾çŠ¶ 5 æ—¥ï¼‰ã®ãƒ¬ãƒãƒ¼ãƒˆ ãŒå¿…è¦ã€‚
ææ¡ˆæ©Ÿèƒ½ã¯ TRIAL / PAID ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ã¿åˆ©ç”¨å¯èƒ½ã€‚

1. ãƒ‡ãƒ¼ã‚¿ä»•æ§˜ï¼ˆãƒ‰ãƒ¡ã‚¤ãƒ³è¦–ç‚¹ï¼‰
   1-1. MealRecommendation ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£
   1 ãƒ¦ãƒ¼ã‚¶ãƒ¼ Ã— 1 æ—¥ã‚ãŸã‚Šæœ€å¤§ 1 ä»¶ï¼ˆã€Œãã®æ—¥ã®ææ¡ˆã€ï¼‰ã€‚

MealRecommendation(
id: MealRecommendationId,
user_id: UserId,

    generated_for_date: date,   # ã“ã®æ—¥ã¾ã§ã®å±¥æ­´ã‚’ã‚‚ã¨ã«ã—ãŸææ¡ˆï¼ˆé€šå¸¸ã€Œä»Šæ—¥ã€ï¼‰

    body: str,                  # ãƒ¡ã‚¤ãƒ³ã®ææ¡ˆæ–‡ï¼ˆæœ¬æ–‡ï¼‰
    tips: list[str],            # å®Ÿè¡Œå¯èƒ½ãªã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã®ç®‡æ¡æ›¸ã

    created_at: datetime,

)
generated_for_date ã®æ„å‘³ï¼š

ã€Œã“ã®æ—¥ã¾ã§ã®ç›´è¿‘ 5 æ—¥åˆ†ãƒ¬ãƒãƒ¼ãƒˆã‚’è¦‹ã¦ä½œã£ãŸææ¡ˆã€ã¨ã„ã†åŸºæº–æ—¥ã€‚
é€šå¸¸ã¯ã€Œã‚¸ãƒ§ãƒ–å®Ÿè¡Œæ—¥ã€ï¼ã€Œä»Šæ—¥ã€ã‚’æŒ‡å®šã™ã‚‹ã€‚
1-2. åˆ¶ç´„
(user_id, generated_for_date) ã§é«˜ã€… 1 ä»¶ã€‚
1 æ—¥ã«ä½•åº¦ã‚‚å†ç”Ÿæˆã—ãªã„ï¼ˆå†ç”Ÿæˆãƒãƒªã‚·ãƒ¼ã‚’è¨­ã‘ã‚‹ãªã‚‰åˆ¥ UC çµŒç”±ï¼‰ã€‚
body ã¨ tips ã¯ LLM ã‹ã‚‰è¿”å´ã•ã‚ŒãŸæ–‡ç« ã‚’åŸºæœ¬ãã®ã¾ã¾ä¿å­˜ã€‚
1-3. ææ¡ˆç”Ÿæˆã®ææ–™ï¼ˆãƒ‰ãƒ¡ã‚¤ãƒ³çš„å…¥åŠ›ï¼‰
ææ¡ˆã¯æ¬¡ã®æƒ…å ±ã‚’ä½¿ã£ã¦ç”Ÿæˆã•ã‚Œã‚‹ï¼š

Profileï¼ˆæ€§åˆ¥/èº«é•·/ä½“é‡ãªã©ã®åŸºæœ¬æƒ…å ±ï¼‰

Active ãª TargetDefinitionï¼ˆã‚ã‚Œã°ï¼‰
â†’ ç¾åœ¨ã©ã‚“ãªæ „é¤Šæ–¹é‡ã‚’ç›®æŒ‡ã—ã¦ã„ã‚‹ã‹

ç›´è¿‘ N æ—¥åˆ†ï¼ˆç¾çŠ¶ 5 æ—¥ï¼‰ã® DailyNutritionReport

å„æ—¥ã® summary / good / improvement / tomorrow_focus
æ—¥ä»˜ï¼ˆtrend ã‚’æŠŠæ¡ã™ã‚‹ãŸã‚ï¼‰
â€» æ•°å€¤çš„ãªæ „é¤Šæƒ…å ±ï¼ˆDailyNutritionSummaryï¼‰ã‚‚å…¥åŠ›ã«å…¥ã‚Œã¦ã‚‚ã‚ˆã„ãŒã€
ç¾æ®µéšã§ã¯ ã€Œãƒ¬ãƒãƒ¼ãƒˆãŒæ•°å€¤ã‚’ã‚ã‚‹ç¨‹åº¦è¨€èªåŒ–ã—ã¦ãã‚Œã¦ã„ã‚‹ã€ å‰æã§ã€
ãƒ¬ãƒãƒ¼ãƒˆã®ãƒ†ã‚­ã‚¹ãƒˆã‚’ä¸»ãªææ–™ã«ã™ã‚‹æƒ³å®šã€‚

2. å¤–éƒ¨ä»•æ§˜ï¼ˆUX / API è¦–ç‚¹ï¼‰
   2-1. èª°ãŒãƒ»ã„ã¤ä½¿ã†ã‹
   æ“ä½œä¸»ä½“ï¼š

ã¾ãšã¯ JOBï¼ˆãƒãƒƒãƒï¼‰ã«ã‚ˆã‚‹è‡ªå‹•å®Ÿè¡ŒãŒãƒ¡ã‚¤ãƒ³ã€‚
å°†æ¥çš„ã«ã¯ã€Œãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒãƒœã‚¿ãƒ³ã‚’æŠ¼ã—ã¦æ‰‹å‹•ã§ææ¡ˆã‚’å–å¾—ã€ã‚‚åŒã˜ UC ã‚’é€šã—ã¦å®Ÿè¡Œã€‚
å‰æï¼š

ãƒ­ã‚°ã‚¤ãƒ³æ¸ˆã¿
Profile ä½œæˆæ¸ˆã¿
è©²å½“ãƒ¦ãƒ¼ã‚¶ãƒ¼ã« ç›´è¿‘ 5 æ—¥åˆ†ã® DailyNutritionReport ãŒæƒã£ã¦ã„ã‚‹ã“ã¨
ãƒ—ãƒ©ãƒ³ãŒ TRIAL / PAID ã§ã‚ã‚‹ã“ã¨
2-2. ãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹ï¼ˆUX ãƒ¬ãƒ™ãƒ«ï¼‰
JOB ã«ã‚ˆã‚‹æœã®è‡ªå‹•ææ¡ˆ

æ¯æœ 7:00 é ƒã«ãƒãƒƒãƒãŒèµ°ã‚Šã€

ç›´è¿‘ 5 æ—¥åˆ†ã®ãƒ¬ãƒãƒ¼ãƒˆãŒã‚ã‚‹ãƒ¦ãƒ¼ã‚¶ãƒ¼å…¨å“¡ã«ã¤ã„ã¦ã€

ä»Šæ—¥ã® MealRecommendation ã‚’ç”Ÿæˆã—ã¦ä¿å­˜ã€‚
ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒã‚¢ãƒ—ãƒªã‚’é–‹ã„ãŸã¨ãã«ã€

ã€Œä»Šæ—¥ã®ææ¡ˆã€ãŒæ—¢ã«è¡¨ç¤ºã§ãã‚‹ã€‚
ãƒ¦ãƒ¼ã‚¶ãƒ¼ã«ã‚ˆã‚‹æ‰‹å‹•å®Ÿè¡Œï¼ˆå°†æ¥çš„ï¼‰

ãƒ›ãƒ¼ãƒ ç”»é¢ã«ã€Œæœ€è¿‘ã®å‚¾å‘ã‹ã‚‰ææ¡ˆã‚’è¦‹ã‚‹ã€ãƒœã‚¿ãƒ³ã€‚

æŠ¼ã—ãŸã‚¿ã‚¤ãƒŸãƒ³ã‚°ã§ GenerateMealRecommendationUseCase ã‚’å©ãã€‚

ç›´è¿‘ 5 æ—¥åˆ†ãƒ¬ãƒãƒ¼ãƒˆãŒæƒã£ã¦ã„ã‚Œã°ææ¡ˆç”Ÿæˆã€

è¶³ã‚Šãªã‘ã‚Œã°ã€Œã‚ã¨ â—¯ æ—¥ã®ãƒ¬ãƒãƒ¼ãƒˆãŒå¿…è¦ã§ã™ã€ã¨è¡¨ç¤ºã€‚
2-3. API ä»•æ§˜ï¼ˆå¤–éƒ¨ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹æƒ³å®šï¼‰
å°†æ¥çš„ã«ç”¨æ„ã™ã‚‹ã‚¤ãƒ¡ãƒ¼ã‚¸ï¼š

(1) POST /nutrition/recommendation
ç›®çš„ï¼šææ¡ˆã®ç”Ÿæˆï¼ˆæ‰‹å‹•ãƒˆãƒªã‚¬ãƒ¼ç”¨ï¼‰

èªè¨¼ï¼šå¿…é ˆ

ãƒ—ãƒ©ãƒ³åˆ¶ç´„ï¼šTRIAL / PAID ã®ã¿

ãƒªã‚¯ã‚¨ã‚¹ãƒˆãƒœãƒ‡ã‚£ï¼ˆçœç•¥å¯ï¼‰ï¼š

{
"base_date": "2025-11-30" // çœç•¥æ™‚ã¯ã€Œä»Šæ—¥ã€
}
æŒ¯ã‚‹èˆã„ï¼š

base_dateï¼ˆçœç•¥æ™‚ã¯ todayï¼‰ã‚’æ±ºå®šã€‚
ãƒ—ãƒ©ãƒ³ãƒã‚§ãƒƒã‚¯ã€‚
Profile å–å¾—ï¼ˆãªã‘ã‚Œã°ã‚¨ãƒ©ãƒ¼ï¼‰ã€‚
DailyNutritionReport_repo ã‹ã‚‰ list_recent(user_id, limit=5) ã‚’å–å¾—ã€‚
æ•°ãŒ 5 æœªæº€ â†’ NotEnoughDailyReportsErrorï¼ˆ400 or 409ï¼‰ã€‚
generated_for_date = base_date ã«å¯¾ã™ã‚‹ Recommendation ãŒæ—¢ã«å­˜åœ¨ â†’ MealRecommendationAlreadyExistsErrorï¼ˆ409ï¼‰ã€‚
LLM å…¥åŠ›ã‚’æ§‹ç¯‰ â†’ ææ¡ˆç”Ÿæˆ â†’ ä¿å­˜ã€‚
Recommendation ã‚’ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã§è¿”ã™ã€‚
ãƒ¬ã‚¹ãƒãƒ³ã‚¹ä¾‹ï¼š

{
"generated_for_date": "2025-11-30",
"body": "ç›´è¿‘ 5 æ—¥é–“ã®é£Ÿäº‹ã¯ãŸã‚“ã±ãè³ªã¯å®‰å®šã—ã¦ã„ã‚‹ä¸€æ–¹ã§ã€å¤œã®ç‚­æ°´åŒ–ç‰©ãŒã‚„ã‚„å¤šã‚ã®å‚¾å‘ãŒã‚ã‚Šã¾ã™ã€‚...",
"tips": [
"å¤•é£Ÿã®ä¸»é£Ÿé‡ã‚’ã„ã¤ã‚‚ã‚ˆã‚Š 20ã€œ30% æ¸›ã‚‰ã—ã¦ã¿ã¾ã—ã‚‡ã†ã€‚",
"é–“é£Ÿã¯ãŸã‚“ã±ãè³ªã‚’å«ã‚€ã‚‚ã®ï¼ˆãƒ¨ãƒ¼ã‚°ãƒ«ãƒˆã€ãƒŠãƒƒãƒ„ç­‰ï¼‰ã«å¯„ã›ã‚‹ã¨ã€è¡€ç³–å€¤ã®å®‰å®šã«å½¹ç«‹ã¡ã¾ã™ã€‚"
]
}
(2) GET /nutrition/recommendation/latest
ç›®çš„ï¼šæœ€æ–°ã® Recommendation ã‚’å–å¾—ã™ã‚‹ï¼ˆä»Šæ—¥ã® or ç›´è¿‘ã®ï¼‰ã€‚

èªè¨¼ï¼šå¿…é ˆ

æŒ¯ã‚‹èˆã„ï¼š

Repo ã‹ã‚‰ list_recent(user_id, limit=1) ã§æœ€æ–°ã‚’å–å¾—
ãªã‘ã‚Œã° 404 or ç©ºï¼ˆã€Œã¾ã ç”Ÿæˆã•ã‚Œã¦ã„ã¾ã›ã‚“ã€ï¼‰
ï¼ˆä¸€è¦§ API /nutrition/recommendation/history ãªã©ã¯å¿…è¦ã«å¿œã˜ã¦æ‹¡å¼µï¼‰

2-4. JOB ã‹ã‚‰è¦‹ãŸå¤–éƒ¨ä»•æ§˜
Job ã‚¹ã‚¯ãƒªãƒ—ãƒˆã¯å†…éƒ¨çš„ã« GenerateMealRecommendationUseCase ã‚’å‘¼ã³å‡ºã™ã€‚

å¤–éƒ¨ã‚µãƒ¼ãƒ“ã‚¹ï¼ˆãƒ•ãƒ­ãƒ³ãƒˆï¼‰ã‹ã‚‰ã¯ç›´æ¥ã‚¸ãƒ§ãƒ–ã‚’å©ã‹ãšã€

ã‚ãã¾ã§ã€Œãƒãƒƒã‚¯ã‚°ãƒ©ã‚¦ãƒ³ãƒ‰ã§å®šæœŸçš„ã«ææ¡ˆãŒç”Ÿæˆã•ã‚Œã¦ã„ã‚‹ã€ã¨ã„ã†å‰æã§è¡¨ç¤ºã€‚ 3. å†…éƒ¨ä»•æ§˜ï¼ˆãƒ‰ãƒ¡ã‚¤ãƒ³ / UseCase / ãƒãƒ¼ãƒˆ / JOBï¼‰
3-1. ãƒ‰ãƒ¡ã‚¤ãƒ³å±¤
Entity: MealRecommendation
å‰è¿°ã®é€šã‚Šã€‚

ä¸»ãªãƒ‰ãƒ¡ã‚¤ãƒ³ãƒ»ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚¨ãƒ©ãƒ¼
NotEnoughDailyReportsError

ç›´è¿‘ 5 æ—¥åˆ†ã®æ—¥æ¬¡ãƒ¬ãƒãƒ¼ãƒˆãŒæƒã£ã¦ã„ãªã„ã€‚
MealRecommendationAlreadyExistsError

åŒã˜ (user_id, generated_for_date) ã«æ—¢ã«ææ¡ˆãŒå­˜åœ¨ã€‚
DailyLogProfileNotFoundError

Profile æœªè¨­å®šï¼ˆè¨˜éŒ²å®Œäº†åˆ¤å®šãªã©ã¨æ•´åˆï¼‰ã€‚
3-2. Repository ãƒãƒ¼ãƒˆ
MealRecommendationRepositoryPort
class MealRecommendationRepositoryPort(Protocol):
def get_by_user_and_date(
self,
user_id: UserId,
generated_for_date: date,
) -> MealRecommendation | None: ...

    def list_recent(
        self,
        user_id: UserId,
        limit: int,
    ) -> Sequence[MealRecommendation]: ...

    def save(self, recommendation: MealRecommendation) -> None: ...

3-3. LLM ãƒãƒ¼ãƒˆï¼ˆææ¡ˆç”Ÿæˆï¼‰
DTO: MealRecommendationLLMInput / Output
@dataclass
class MealRecommendationLLMInput:
user_id: UserId
base_date: date # ã“ã®æ—¥ã¾ã§ã®å±¥æ­´ã‚’è¦‹ã¦ææ¡ˆã™ã‚‹
profile: Profile
active_target: TargetDefinition | None
recent_reports: list[DailyNutritionReport] # ç›´è¿‘ N æ—¥åˆ†

@dataclass
class MealRecommendationLLMOutput:
body: str
tips: list[str]
Port: MealRecommendationGeneratorPort
class MealRecommendationGeneratorPort(Protocol):
def generate(self, input: MealRecommendationLLMInput) -> MealRecommendationLLMOutput:
...
Stub å®Ÿè£…ï¼šStubMealRecommendationGenerator
â†’ å…¥åŠ›ã® base_date ã‚„ len(recent_reports) ã‚’ã¡ã‚‡ã£ã¨ä½¿ã£ã¦å›ºå®šãƒ†ã‚­ã‚¹ãƒˆç”Ÿæˆ
æœ¬å®Ÿè£…ï¼šOpenAIMealRecommendationGeneratorï¼ˆOpenAI APIï¼‰
3-4. UseCaseï¼šGenerateMealRecommendationUseCase
è²¬å‹™

ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ç›´è¿‘ N æ—¥åˆ†ã® DailyNutritionReport ã‚’é›†ã‚ã€
ãƒ—ãƒ©ãƒ³ãƒ»Profileãƒ»ActiveTarget ãªã©ã‚‚è€ƒæ…®ã—ã¤ã¤ã€
LLM ã§ MealRecommendation ã‚’ç”Ÿæˆãƒ»ä¿å­˜ã™ã‚‹ã€‚
å…¥åŠ›

user_id: UserId
base_date: date | Noneï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã¯ã€Œä»Šæ—¥ã€ï¼‰
ä¾å­˜

ProfileRepositoryPort
TargetRepositoryPortï¼ˆActive Target ã‚’å–å¾—ï¼‰
DailyNutritionReportRepositoryPort
MealRecommendationRepositoryPort
MealRecommendationGeneratorPort
ClockPort
User/Plan åˆ¤å®šç”¨ï¼ˆUserRepositoryPort or PlanCheckerï¼‰
å‡¦ç†ãƒ•ãƒ­ãƒ¼ï¼ˆè«–ç†ï¼‰

base_date ãŒ None ã®å ´åˆï¼Œclock.now().date() ã‚’ç”¨ã„ã‚‹ã€‚

User ã®ãƒ—ãƒ©ãƒ³ãƒã‚§ãƒƒã‚¯ï¼š

TRIAL / PAID ä»¥å¤– â†’ ã‚¨ãƒ©ãƒ¼ï¼ˆPermissionDenied çš„ï¼‰
Profile å–å¾—ï¼š

profile_repo.get_by_user_id(user_id)
ãªã‘ã‚Œã° DailyLogProfileNotFoundError
ç›´è¿‘ N æ—¥åˆ†ã®æ—¥æ¬¡ãƒ¬ãƒãƒ¼ãƒˆå–å¾—ï¼š

recent_reports = daily_report_repo.list_recent(user_id, limit=N)
len(recent_reports) < N â†’ NotEnoughDailyReportsError
generated_for_date = base_date ã¨æ±ºå®š

æ—¢å­˜ Recommendation ãƒã‚§ãƒƒã‚¯ï¼š

rec = recommendation_repo.get_by_user_and_date(user_id, generated_for_date)
å­˜åœ¨ã™ã‚‹å ´åˆ â†’ MealRecommendationAlreadyExistsError
Active ã‚¿ãƒ¼ã‚²ãƒƒãƒˆå–å¾—ï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰ï¼š

active_target = target_repo.get_active_for_user(user_id)
ãªã‘ã‚Œã° Noneï¼ˆææ¡ˆã¯ãã‚Œã§ã‚‚ç”Ÿæˆå¯èƒ½ï¼‰
LLM å…¥åŠ› DTO ã‚’æ§‹ç¯‰ï¼š

MealRecommendationLLMInput(user_id, base_date, profile, active_target, recent_reports)
LLM ãƒãƒ¼ãƒˆã‹ã‚‰å‡ºåŠ›å–å¾—ï¼š

llm_output = generator.generate(llm_input)
MealRecommendation ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£ç”Ÿæˆï¼š

created_at = clock.now()
recommendation = MealRecommendation.create(...)
Repo.save(recommendation)
Recommendation ã‚’æˆ»ã‚Šå€¤ã¨ã—ã¦è¿”ã™
3-5. JOB ç”¨ãƒ­ã‚¸ãƒƒã‚¯
ç›®çš„ï¼š
æ¯æ—¥ 1 å›ã€å…¨ãƒ¦ãƒ¼ã‚¶ãƒ¼ã«å¯¾ã—ã¦ã€Œä»Šæ—¥ã®ææ¡ˆã€ã‚’è‡ªå‹•ç”Ÿæˆã™ã‚‹ã€‚

ãƒ•ãƒ­ãƒ¼ï¼ˆæ¦‚å¿µï¼‰

date_today = clock.now().date()

user_repo.list_active_users() ã§å¯¾è±¡ãƒ¦ãƒ¼ã‚¶ãƒ¼ä¸€è¦§ã‚’å–å¾—

å„ãƒ¦ãƒ¼ã‚¶ãƒ¼ã«ã¤ã„ã¦ï¼š

GenerateMealRecommendationUseCase.execute(user_id, base_date=date_today) ã‚’å‘¼ã¶

ä¾‹å¤–ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ï¼š

NotEnoughDailyReportsError â†’
ãã®ãƒ¦ãƒ¼ã‚¶ãƒ¼ã§ã¯ã€Œã¾ã ãƒ¬ãƒãƒ¼ãƒˆãŒè¶³ã‚Šãªã„ã€ãŸã‚ã‚¹ã‚­ãƒƒãƒ—
MealRecommendationAlreadyExistsError â†’
ã™ã§ã«ä»Šæ—¥ã®ææ¡ˆãŒã‚ã‚‹ â†’ ã‚¹ã‚­ãƒƒãƒ—
ãã®ä»– â†’ ãƒ­ã‚°å‡ºåŠ›ï¼ˆã‚¸ãƒ§ãƒ–è‡ªä½“ã¯ç¶™ç¶šï¼‰
è¦ä»¶

ã“ã® JOB ã¯ æ—¥æ¬¡ï¼ˆæ—¥ä»˜ã‚’è·¨ã„ã å¾Œï¼‰ã«å®Ÿè¡Œã•ã‚Œã‚‹å‰æã€‚
å®Ÿè¡Œã«ã¯ TRIAL / PAID åˆ¤å®šãŒçµ„ã¿è¾¼ã¾ã‚Œã‚‹ â†’ FREE ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¯å¯¾è±¡å¤–ã€‚ 4. ã¾ã¨ã‚ï¼ˆææ¡ˆæ©Ÿèƒ½ã®ã‚­ãƒ¢ï¼‰
ä½•ã‚’ã—ã¦ã„ã‚‹ã‹

ç›´è¿‘ 5 æ—¥åˆ†ã®æ—¥æ¬¡ãƒ¬ãƒãƒ¼ãƒˆã¨ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ—ãƒ­ãƒ•ã‚¡ã‚¤ãƒ«ã€ï¼ˆã‚ã‚Œã°ï¼‰ã‚¿ãƒ¼ã‚²ãƒƒãƒˆã‚’å…ƒã«ã€
ã€Œæ¬¡ã«ã©ã†é£Ÿã¹ã‚‹ã¨ã„ã„ã®ã‹ï¼Ÿã€ã‚’ LLM ã«è€ƒãˆã•ã›ã€ãã‚Œã‚’ä¿å­˜ã—ã¦ã„ã‚‹ã€‚
ã„ã¤ç”Ÿæˆã§ãã‚‹ã‹

è©²å½“ãƒ¦ãƒ¼ã‚¶ãƒ¼ã«ç›´è¿‘ 5 æ—¥åˆ†ã® DailyNutritionReport ãŒæƒã£ã¦ã„ã‚‹ã¨ãã€‚
TRIAL / PAID ãƒ—ãƒ©ãƒ³ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ã¿ã€‚
åŒã˜æ—¥ä»˜ã«è¤‡æ•°å›ã¯ç”Ÿæˆã›ãšã€1 æ—¥ 1 ææ¡ˆã€‚
èª°ãŒãƒˆãƒªã‚¬ãƒ¼ã™ã‚‹ã‹

ã¾ãšã¯ JOBï¼ˆè‡ªå‹•å®Ÿè¡Œï¼‰ãŒãƒ¡ã‚¤ãƒ³ã€‚
å°†æ¥çš„ã«ã¯ /nutrition/recommendation API ã‚’é€šã˜ã¦ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒæ‰‹å‹•ã§ãƒˆãƒªã‚¬ãƒ¼ã™ã‚‹ã“ã¨ã‚‚å¯èƒ½ã€‚
ä½•ã«ä½¿ã‚ã‚Œã‚‹ã‹

ãƒ›ãƒ¼ãƒ ç”»é¢ãªã©ã§ã€Œä»Šæ—¥ã®ææ¡ˆã€ã¨ã—ã¦è¡¨ç¤ºã€‚
å±¥æ­´ã¨ã—ã¦è“„ç©ã•ã‚Œã‚Œã°ã€ã€Œéå»ã®ææ¡ˆã€ã¨ã€Œå®Ÿéš›ã®è¡Œå‹•ãƒ»çµæœã€ã‚’ç´ã¥ã‘ãŸåˆ†æã‚‚å¯èƒ½ã«ãªã‚‹ã€‚
ã“ã®ä»•æ§˜ã‚’å‰æã«ã—ã¦ãŠã‘ã°ã€
ã‚ã¨ã¯ LLM ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆè¨­è¨ˆã¨ UI ã§ã®è¦‹ã›æ–¹ã‚’ç©ã¿ä¸Šã’ã‚‹ã ã‘ã§ã€
ã€ŒãŸã ã®è¨˜éŒ²ã‚¢ãƒ—ãƒªã€ã‹ã‚‰ä¸€æ­©é€²ã‚“ã  ã€Œè¨˜éŒ² â†’ æŒ¯ã‚Šè¿”ã‚Š â†’ æ¬¡ã®ä¸€æ‰‹ã€ ã¾ã§å›ã‚‹ãƒ—ãƒ­ãƒ€ã‚¯ãƒˆã«ä»•ä¸Šã’ã‚‰ã‚Œã‚‹ã¯ãšã§ã™ ğŸ’¡
